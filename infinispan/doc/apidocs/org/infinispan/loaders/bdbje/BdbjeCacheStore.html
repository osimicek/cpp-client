<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_33) on Fri Feb 08 16:40:56 GMT 2013 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
BdbjeCacheStore (Infinispan Distribution 5.2.1.Final API)
</TITLE>

<META NAME="date" CONTENT="2013-02-08">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BdbjeCacheStore (Infinispan Distribution 5.2.1.Final API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BdbjeCacheStore.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStoreConfig.html" title="class in org.infinispan.loaders.bdbje"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/infinispan/loaders/bdbje/BdbjeCacheStore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BdbjeCacheStore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.infinispan.loaders.AbstractCacheStore">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.infinispan.loaders.bdbje</FONT>
<BR>
Class BdbjeCacheStore</H2>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html" title="class in org.infinispan.loaders">org.infinispan.loaders.AbstractCacheLoader</A>
      <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">org.infinispan.loaders.AbstractCacheStore</A>
          <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.infinispan.loaders.bdbje.BdbjeCacheStore</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/infinispan/loaders/CacheLoader.html" title="interface in org.infinispan.loaders">CacheLoader</A>, <A HREF="../../../../org/infinispan/loaders/CacheStore.html" title="interface in org.infinispan.loaders">CacheStore</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>BdbjeCacheStore</B><DT>extends <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></DL>
</PRE>

<P>
An Oracle SleepyCat JE implementation of a <A HREF="../../../../org/infinispan/loaders/CacheStore.html" title="interface in org.infinispan.loaders"><CODE>CacheStore</CODE></A>.  <p/>This implementation uses
 two databases <ol> <li>stored entry database: <tt>/{location}/CacheInstance-<A HREF="../../../../org/infinispan/api/BasicCache.html#getName()"><CODE>name</CODE></A></tt></li> <A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries"><CODE>stored entries</CODE></A> are stored here, keyed on
 <A HREF="../../../../org/infinispan/container/entries/CacheEntry.html#getKey()"><CODE>CacheEntry.getKey()</CODE></A> <li>class catalog database:
 <tt>/{location}/CacheInstance-<A HREF="../../../../org/infinispan/api/BasicCache.html#getName()"><CODE>name</CODE></A>_class_catalog</tt></li> class descriptions
 are stored here for efficiency reasons. </ol> <p/> <p><tt>/{location}/je.properties</tt> is optional and will
 override any parameters to the internal SleepyCat JE <CODE>EnvironmentConfig</CODE>.</p>
 <p/>
 All data access is transactional.  Any attempted reads to locked records will block.  The maximum duration of this is
 set in nanoseconds via the parameter <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStoreConfig.html#getLockAcquistionTimeout()"><CODE>BdbjeCacheStoreConfig.getLockAcquistionTimeout()</CODE></A>.
 Calls to <A HREF="../../../../org/infinispan/loaders/CacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>CacheStore.prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction,
 boolean)</CODE></A>  will attempt to resolve deadlocks, retrying up to <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStoreConfig.html#getMaxTxRetries()"><CODE>BdbjeCacheStoreConfig.getMaxTxRetries()</CODE></A>
 attempts.
 <p/>
 Unlike the C version of SleepyCat, JE does not support MVCC or READ_COMMITTED isolation.  In other words, readers
 will block on any data held by a pending transaction.  As such, it is best practice to keep the duration between
 <code>prepare</code> and <code>commit</code> as short as possible.
 <p/>
<P>

<P>
<DL>
<DT><B>Since:</B></DT>
  <DD>4.0</DD>
<DT><B>Author:</B></DT>
  <DD>Adrian Cole, Manik Surtani</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.infinispan.loaders.AbstractCacheStore"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#multiThreadedPurge">multiThreadedPurge</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#purgerService">purgerService</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.infinispan.loaders.AbstractCacheLoader"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html" title="class in org.infinispan.loaders">AbstractCacheLoader</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html#cache">cache</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html#marshaller">marshaller</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#BdbjeCacheStore()">BdbjeCacheStore</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#applyModifications(java.util.List)">applyModifications</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/modifications/Modification.html" title="interface in org.infinispan.loaders.modifications">Modification</A>&gt;&nbsp;mods)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perform the <code>mods</code> atomically by creating a <A HREF="../../../../org/infinispan/loaders/bdbje/ModificationsTransactionWorker.html" title="class in org.infinispan.loaders.bdbje"><CODE>worker</CODE></A> and invoking
 them in <CODE>TransactionRunner.run(com.sleepycat.collections.TransactionWorker)</CODE>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#clear()">clear</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clears all entries in the store</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#commit(org.infinispan.transaction.xa.GlobalTransaction)">commit</A></B>(<A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Commits a transaction that has been previously prepared.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#completeTransaction(org.infinispan.transaction.xa.GlobalTransaction, boolean)">completeTransaction</A></B>(<A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx,
                    boolean&nbsp;commit)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Looks up the SleepyCat transaction associated with the parameter <code>tx</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#fromStream(java.io.ObjectInput)">fromStream</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/ObjectInput.html?is-external=true" title="class or interface in java.io">ObjectInput</A>&nbsp;ois)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes contents of the stream to the store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/CacheLoaderConfig.html" title="interface in org.infinispan.loaders">CacheLoaderConfig</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#getConfigurationClass()">getConfigurationClass</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is used by the configuration parser to get a hold of the CacheLoader implementation's corresponding
 <A HREF="../../../../org/infinispan/loaders/CacheLoaderConfig.html" title="interface in org.infinispan.loaders"><CODE>CacheLoaderConfig</CODE></A> type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#init(org.infinispan.loaders.CacheLoaderConfig, org.infinispan.Cache, org.infinispan.marshall.StreamingMarshaller)">init</A></B>(<A HREF="../../../../org/infinispan/loaders/CacheLoaderConfig.html" title="interface in org.infinispan.loaders">CacheLoaderConfig</A>&nbsp;config,
     <A HREF="../../../../org/infinispan/Cache.html" title="interface in org.infinispan">Cache</A>&lt;?,?&gt;&nbsp;cache,
     <A HREF="../../../../org/infinispan/marshall/StreamingMarshaller.html" title="interface in org.infinispan.marshall">StreamingMarshaller</A>&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used to initialize a cache loader.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#load(int)">load</A></B>(int&nbsp;numEntries)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads up to a specific number of entries.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#load(java.lang.Object)">load</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads an entry mapped to by a given key.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#loadAll()">loadAll</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads all entries in the loader.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#loadAllKeys(java.util.Set)">loadAllKeys</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&gt;&nbsp;keysToExclude)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loads a set of all keys, excluding a filter set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction)">prepare</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/modifications/Modification.html" title="interface in org.infinispan.loaders.modifications">Modification</A>&gt;&nbsp;mods,
        <A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Looks up the <CODE>SleepyCat transaction</CODE> associated with <code>tx</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)">prepare</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/modifications/Modification.html" title="interface in org.infinispan.loaders.modifications">Modification</A>&gt;&nbsp;mods,
        <A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx,
        boolean&nbsp;isOnePhase)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Issues a prepare call with a set of modifications to be applied to the cache store</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#printLicense()">printLicense</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prints terms of use for Berkeley DB JE</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#purgeInternal()">purgeInternal</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Iterate through <CODE>StoredMap.entrySet()</CODE> and remove, if expired.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#remove(java.lang.Object)">remove</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Removes an entry in the store.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#rollback(org.infinispan.transaction.xa.GlobalTransaction)">rollback</A></B>(<A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rolls back a transaction that has been previously prepared
 <p/>
 This method <i>may</b> be invoked on a transaction for which there is <i>no</i> prior <A HREF="../../../../org/infinispan/loaders/CacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>CacheStore.prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#start()">start</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Validates configuration, configures and opens the <CODE>Environment</CODE>, then <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#openSleepyCatResources()"><CODE>opens the databases</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#stop()">stop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stops transaction and purge processing and closes the SleepyCat environment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#store(org.infinispan.container.entries.InternalCacheEntry)">store</A></B>(<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&nbsp;ed)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stores an entry</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#toStream(java.io.ObjectOutput)">toStream</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/ObjectOutput.html?is-external=true" title="class or interface in java.io">ObjectOutput</A>&nbsp;oos)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes the current count of cachestore entries followed by a pair of byte[]s corresponding to the SleepyCat
 binary representation of <A HREF="../../../../org/infinispan/container/entries/CacheEntry.html#getKey()"><CODE>key</CODE></A> <A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries"><CODE>value</CODE></A>.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.infinispan.loaders.AbstractCacheStore"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#getCacheStoreConfig()">getCacheStoreConfig</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#getConcurrencyLevel()">getConcurrencyLevel</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#getMarshaller()">getMarshaller</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#purgeExpired()">purgeExpired</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#removeAll(java.util.Set)">removeAll</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#safeClose(java.io.InputStream)">safeClose</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#safeClose(java.io.OutputStream)">safeClose</A>, <A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#supportsMultiThreadedPurge()">supportsMultiThreadedPurge</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.infinispan.loaders.AbstractCacheLoader"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html" title="class in org.infinispan.loaders">AbstractCacheLoader</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheLoader.html#containsKey(java.lang.Object)">containsKey</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.infinispan.loaders.CacheLoader"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.infinispan.loaders.<A HREF="../../../../org/infinispan/loaders/CacheLoader.html" title="interface in org.infinispan.loaders">CacheLoader</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html#containsKey(java.lang.Object)">containsKey</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BdbjeCacheStore()"><!-- --></A><H3>
BdbjeCacheStore</H3>
<PRE>
public <B>BdbjeCacheStore</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="init(org.infinispan.loaders.CacheLoaderConfig, org.infinispan.Cache, org.infinispan.marshall.StreamingMarshaller)"><!-- --></A><H3>
init</H3>
<PRE>
public void <B>init</B>(<A HREF="../../../../org/infinispan/loaders/CacheLoaderConfig.html" title="interface in org.infinispan.loaders">CacheLoaderConfig</A>&nbsp;config,
                 <A HREF="../../../../org/infinispan/Cache.html" title="interface in org.infinispan">Cache</A>&lt;?,?&gt;&nbsp;cache,
                 <A HREF="../../../../org/infinispan/marshall/StreamingMarshaller.html" title="interface in org.infinispan.marshall">StreamingMarshaller</A>&nbsp;m)
          throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Used to initialize a cache loader.  Typically invoked by the <A HREF="../../../../org/infinispan/loaders/CacheLoaderManager.html" title="interface in org.infinispan.loaders"><CODE>CacheLoaderManager</CODE></A>
 when setting up cache loaders. This implementation expects config to be an instance of <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStoreConfig.html" title="class in org.infinispan.loaders.bdbje"><CODE>BdbjeCacheStoreConfig</CODE></A> <p /> note
 that the <code>m</code> is not currently used as SleepyCat has its own efficient solution.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html#init(org.infinispan.loaders.CacheLoaderConfig, org.infinispan.Cache, org.infinispan.marshall.StreamingMarshaller)">init</A></CODE> in interface <CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html" title="interface in org.infinispan.loaders">CacheLoader</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#init(org.infinispan.loaders.CacheLoaderConfig, org.infinispan.Cache, org.infinispan.marshall.StreamingMarshaller)">init</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>config</CODE> - the cache loader configuration bean<DD><CODE>cache</CODE> - cache associated with this cache loader. Implementations may use this to determine cache name when
               selecting where refer to state in storage, for example, a different database table name.<DD><CODE>m</CODE> - marshaller to use when loading state from a stream, if supported by the implementation.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE><DT><B>See Also:</B><DD><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStoreConfig.html" title="class in org.infinispan.loaders.bdbje"><CODE>BdbjeCacheStoreConfig</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getConfigurationClass()"><!-- --></A><H3>
getConfigurationClass</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/CacheLoaderConfig.html" title="interface in org.infinispan.loaders">CacheLoaderConfig</A>&gt; <B>getConfigurationClass</B>()</PRE>
<DL>
<DD>This method is used by the configuration parser to get a hold of the CacheLoader implementation's corresponding
 <A HREF="../../../../org/infinispan/loaders/CacheLoaderConfig.html" title="interface in org.infinispan.loaders"><CODE>CacheLoaderConfig</CODE></A> type. This is usually done by instantiating the CacheLoader
 and then calling this method.  This may result in 2 instances being created, however, since the instance
 created to get a hold of the configuration type is then discarded and another instance is created for actual
 use as a CacheLoader when the cache starts.
 <p />
 Since Infinispan 4.1, you can also annotate your CacheLoader implementation with <A HREF="../../../../org/infinispan/loaders/CacheLoaderMetadata.html" title="annotation in org.infinispan.loaders"><CODE>CacheLoaderMetadata</CODE></A>
 and provide this information via the annotation, which will prevent unnecessary instances being created.
 <p />
<P>
<DD><DL>

<DT><B>Returns:</B><DD><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStoreConfig.html" title="class in org.infinispan.loaders.bdbje"><CODE>BdbjeCacheStoreConfig</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="start()"><!-- --></A><H3>
start</H3>
<PRE>
public void <B>start</B>()
           throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD> Validates configuration, configures and opens the <CODE>Environment</CODE>, then <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#openSleepyCatResources()"><CODE>opens the databases</CODE></A>.  When this is
 finished, transactional and purging services are instantiated.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html#start()">start</A></CODE> in interface <CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html" title="interface in org.infinispan.loaders">CacheLoader</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#start()">start</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="stop()"><!-- --></A><H3>
stop</H3>
<PRE>
public void <B>stop</B>()
          throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Stops transaction and purge processing and closes the SleepyCat environment.  The environment and databases are
 not removed from the file system. Exceptions during close of databases are ignored as closing the environment
 will ensure the databases are also.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html#stop()">stop</A></CODE> in interface <CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html" title="interface in org.infinispan.loaders">CacheLoader</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#stop()">stop</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)"><!-- --></A><H3>
prepare</H3>
<PRE>
public void <B>prepare</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/modifications/Modification.html" title="interface in org.infinispan.loaders.modifications">Modification</A>&gt;&nbsp;mods,
                    <A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx,
                    boolean&nbsp;isOnePhase)
             throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Issues a prepare call with a set of modifications to be applied to the cache store delegates to <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#applyModifications(java.util.List)"><CODE>applyModifications(java.util.List)</CODE></A>, if
 <code>isOnePhase</code>. Otherwise, delegates to <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction)"><CODE>prepare(java.util.List,
 org.infinispan.transaction.xa.GlobalTransaction)</CODE></A>
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)">prepare</A></CODE> in interface <CODE><A HREF="../../../../org/infinispan/loaders/CacheStore.html" title="interface in org.infinispan.loaders">CacheStore</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)">prepare</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>mods</CODE> - modifications to be applied<DD><CODE>tx</CODE> - transaction identifier<DD><CODE>isOnePhase</CODE> - if true, there will not be a commit or rollback phase and changes should be flushed
                      immediately
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems writing to the store</DL>
</DD>
</DL>
<HR>

<A NAME="applyModifications(java.util.List)"><!-- --></A><H3>
applyModifications</H3>
<PRE>
protected void <B>applyModifications</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/modifications/Modification.html" title="interface in org.infinispan.loaders.modifications">Modification</A>&gt;&nbsp;mods)
                           throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Perform the <code>mods</code> atomically by creating a <A HREF="../../../../org/infinispan/loaders/bdbje/ModificationsTransactionWorker.html" title="class in org.infinispan.loaders.bdbje"><CODE>worker</CODE></A> and invoking
 them in <CODE>TransactionRunner.run(com.sleepycat.collections.TransactionWorker)</CODE>.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#applyModifications(java.util.List)">applyModifications</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>mods</CODE> - actions to perform atomically
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - on problems during the transaction</DL>
</DD>
</DL>
<HR>

<A NAME="prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction)"><!-- --></A><H3>
prepare</H3>
<PRE>
protected void <B>prepare</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</A>&lt;? extends <A HREF="../../../../org/infinispan/loaders/modifications/Modification.html" title="interface in org.infinispan.loaders.modifications">Modification</A>&gt;&nbsp;mods,
                       <A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx)
                throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Looks up the <CODE>SleepyCat transaction</CODE> associated with <code>tx</code>.  Creates a <A HREF="../../../../org/infinispan/loaders/bdbje/ModificationsTransactionWorker.html" title="class in org.infinispan.loaders.bdbje"><CODE>ModificationsTransactionWorker</CODE></A> instance from <code>mods</code>.  Then prepares the
 transaction via <A HREF="../../../../org/infinispan/loaders/bdbje/PreparableTransactionRunner.html#prepare(com.sleepycat.collections.TransactionWorker)"><CODE>PreparableTransactionRunner.prepare(com.sleepycat.collections.TransactionWorker)</CODE></A>.
 Finally, it invalidates <CODE>CurrentTransaction.getTransaction()</CODE> so that no other
 thread can accidentally commit this.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>mods</CODE> - modifications to be applied<DD><CODE>tx</CODE> - transaction identifier
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems writing to the store</DL>
</DD>
</DL>
<HR>

<A NAME="rollback(org.infinispan.transaction.xa.GlobalTransaction)"><!-- --></A><H3>
rollback</H3>
<PRE>
public void <B>rollback</B>(<A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx)</PRE>
<DL>
<DD>Rolls back a transaction that has been previously prepared
 <p/>
 This method <i>may</b> be invoked on a transaction for which there is <i>no</i> prior <A HREF="../../../../org/infinispan/loaders/CacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>CacheStore.prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)</CODE></A>.  The implementation would
 need to deal with this case accordingly.  Typically, this would be a no-op, after ensuring any resources attached
 to the transaction are cleared up.
 <p/>
 Also note that this method <i>may</i> be invoked on a thread which is different from the <A HREF="../../../../org/infinispan/loaders/CacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>CacheStore.prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)</CODE></A> invocation.  As such, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/ThreadLocal.html?is-external=true" title="class or interface in java.lang"><CODE>ThreadLocal</CODE></A>s should not be relied upon to maintain transaction context.
 <p/>
 <p/>
 This implementation calls <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#completeTransaction(org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>completeTransaction(org.infinispan.transaction.xa.GlobalTransaction,
 boolean)</CODE></A> completeTransaction} with an argument of false.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheStore.html#rollback(org.infinispan.transaction.xa.GlobalTransaction)">rollback</A></CODE> in interface <CODE><A HREF="../../../../org/infinispan/loaders/CacheStore.html" title="interface in org.infinispan.loaders">CacheStore</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#rollback(org.infinispan.transaction.xa.GlobalTransaction)">rollback</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - tx to roll back</DL>
</DD>
</DL>
<HR>

<A NAME="commit(org.infinispan.transaction.xa.GlobalTransaction)"><!-- --></A><H3>
commit</H3>
<PRE>
public void <B>commit</B>(<A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx)
            throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Commits a transaction that has been previously prepared.
 <p/>
 This method <i>may</b> be invoked on a transaction for which there is <i>no</i> prior <A HREF="../../../../org/infinispan/loaders/CacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>CacheStore.prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)</CODE></A>.  The implementation would
 need to deal with this case accordingly.  Typically, this would be a no-op, after ensuring any resources attached
 to the transaction are cleared up.
 <p/>
 Also note that this method <i>may</i> be invoked on a thread which is different from the <A HREF="../../../../org/infinispan/loaders/CacheStore.html#prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>CacheStore.prepare(java.util.List, org.infinispan.transaction.xa.GlobalTransaction, boolean)</CODE></A> invocation.  As such, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/ThreadLocal.html?is-external=true" title="class or interface in java.lang"><CODE>ThreadLocal</CODE></A>s should not be relied upon to maintain transaction context.
 <p/>
 <p/>
 This implementation calls <A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#completeTransaction(org.infinispan.transaction.xa.GlobalTransaction, boolean)"><CODE>completeTransaction(org.infinispan.transaction.xa.GlobalTransaction,
 boolean)</CODE></A> completeTransaction} with an argument of true.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheStore.html#commit(org.infinispan.transaction.xa.GlobalTransaction)">commit</A></CODE> in interface <CODE><A HREF="../../../../org/infinispan/loaders/CacheStore.html" title="interface in org.infinispan.loaders">CacheStore</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#commit(org.infinispan.transaction.xa.GlobalTransaction)">commit</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - tx to commit
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems writing to the store</DL>
</DD>
</DL>
<HR>

<A NAME="completeTransaction(org.infinispan.transaction.xa.GlobalTransaction, boolean)"><!-- --></A><H3>
completeTransaction</H3>
<PRE>
protected void <B>completeTransaction</B>(<A HREF="../../../../org/infinispan/transaction/xa/GlobalTransaction.html" title="class in org.infinispan.transaction.xa">GlobalTransaction</A>&nbsp;tx,
                                   boolean&nbsp;commit)
                            throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Looks up the SleepyCat transaction associated with the parameter <code>tx</code>.  If there is no associated
 sleepycat transaction, an error is logged.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tx</CODE> - java transaction used to lookup a SleepyCat transaction<DD><CODE>commit</CODE> - true to commit false to abort
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - if there are problems committing or aborting the transaction</DL>
</DD>
</DL>
<HR>

<A NAME="remove(java.lang.Object)"><!-- --></A><H3>
remove</H3>
<PRE>
public boolean <B>remove</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key)
               throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Removes an entry in the store. This implementation delegates to <CODE>StoredMap.remove(Object)</CODE>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - key to remove
<DT><B>Returns:</B><DD>true if the entry was removed; false if the entry wasn't found.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems writing to the store</DL>
</DD>
</DL>
<HR>

<A NAME="load(java.lang.Object)"><!-- --></A><H3>
load</H3>
<PRE>
public <A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A> <B>load</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&nbsp;key)
                        throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Loads an entry mapped to by a given key.  Should return null if the entry does not exist.  Expired entries are not
 returned. This implementation delegates to <CODE>StoredMap.get(Object)</CODE>.  If the object is expired, it will
 not be returned.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>key</CODE> - key
<DT><B>Returns:</B><DD>an entry
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems reading from source</DL>
</DD>
</DL>
<HR>

<A NAME="store(org.infinispan.container.entries.InternalCacheEntry)"><!-- --></A><H3>
store</H3>
<PRE>
public void <B>store</B>(<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&nbsp;ed)
           throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Stores an entry This implementation delegates to <CODE>StoredMap.put(Object, Object)</CODE>
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ed</CODE> - entry to store
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems writing to the store</DL>
</DD>
</DL>
<HR>

<A NAME="clear()"><!-- --></A><H3>
clear</H3>
<PRE>
public void <B>clear</B>()
           throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Clears all entries in the store This implementation delegates to <CODE>StoredContainer.clear()</CODE>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems writing to the store</DL>
</DD>
</DL>
<HR>

<A NAME="loadAll()"><!-- --></A><H3>
loadAll</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&gt; <B>loadAll</B>()
                                throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Loads all entries in the loader.  Expired entries are not returned. This implementation returns a Set from <CODE>StoredMap.values()</CODE>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a set of entries, or an empty set if the loader is emptied.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems reading from source</DL>
</DD>
</DL>
<HR>

<A NAME="load(int)"><!-- --></A><H3>
load</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries">InternalCacheEntry</A>&gt; <B>load</B>(int&nbsp;numEntries)
                             throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html#load(int)">CacheLoader</A></CODE></B></DD>
<DD>Loads up to a specific number of entries.  There is no guarantee as to order of entries loaded.  The set returned
 would contain up to a maximum of <tt>numEntries</tt> entries, and no more.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>numEntries</CODE> - maximum number of entries to load
<DT><B>Returns:</B><DD>a set of entries, which would contain between 0 and numEntries entries.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="loadAllKeys(java.util.Set)"><!-- --></A><H3>
loadAllKeys</H3>
<PRE>
public <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&gt; <B>loadAllKeys</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</A>&lt;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</A>&gt;&nbsp;keysToExclude)
                        throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/infinispan/loaders/CacheLoader.html#loadAllKeys(java.util.Set)">CacheLoader</A></CODE></B></DD>
<DD>Loads a set of all keys, excluding a filter set.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>keysToExclude</CODE> - a set of keys to exclude.  An empty set or null will indicate that all keys should be returned.
<DT><B>Returns:</B><DD>A set containing keys of entries stored.  An empty set is returned if the loader is empty.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="fromStream(java.io.ObjectInput)"><!-- --></A><H3>
fromStream</H3>
<PRE>
public void <B>fromStream</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/ObjectInput.html?is-external=true" title="class or interface in java.io">ObjectInput</A>&nbsp;ois)
                throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Writes contents of the stream to the store.  Implementations should expect that the stream contains data in an
 implementation-specific format, typically generated using <A HREF="../../../../org/infinispan/loaders/CacheStore.html#toStream(java.io.ObjectOutput)"><CODE>CacheStore.toStream(java.io.ObjectOutput)</CODE></A>.  While not a
 requirement, it is recommended that implementations make use of the <A HREF="../../../../org/infinispan/marshall/StreamingMarshaller.html" title="interface in org.infinispan.marshall"><CODE>StreamingMarshaller</CODE></A>
 when dealing with the stream to make use of efficient marshalling.
 <p/>
 It is imperative that implementations <b><i>do not</i></b> close the stream after finishing with it.
 <p/>
 It is also <b><i>recommended</b></i> that implementations use their own start and end markers on the stream since
 other processes may write additional data to the stream after the cache store has written to it.  As such, either
 markers or some other mechanism to prevent the store from reading too much information should be employed when
 writing to the stream in <A HREF="../../../../org/infinispan/loaders/CacheStore.html#fromStream(java.io.ObjectInput)"><CODE>CacheStore.fromStream(java.io.ObjectInput)</CODE></A> to prevent data corruption.
 <p/>
 It can be assumed that the stream passed in already performs buffering such that the cache store implementation
 doesn't have to.
 <p/> This implementation reads the number of entries to load from the stream, then begins a transaction.
 During that transaction, the cachestore is cleared and replaced with entries from the stream.  If there are any
 errors during the process, the entire transaction is rolled back.  Deadlock handling is not addressed, as there
 is no means to rollback reads from the input stream.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ois</CODE> - stream to read from
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems writing to the store<DT><B>See Also:</B><DD><A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStore.html#toStream(java.io.ObjectOutput)"><CODE>toStream(java.io.ObjectOutput)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="toStream(java.io.ObjectOutput)"><!-- --></A><H3>
toStream</H3>
<PRE>
public void <B>toStream</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/ObjectOutput.html?is-external=true" title="class or interface in java.io">ObjectOutput</A>&nbsp;oos)
              throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Writes the current count of cachestore entries followed by a pair of byte[]s corresponding to the SleepyCat
 binary representation of <A HREF="../../../../org/infinispan/container/entries/CacheEntry.html#getKey()"><CODE>key</CODE></A> <A HREF="../../../../org/infinispan/container/entries/InternalCacheEntry.html" title="interface in org.infinispan.container.entries"><CODE>value</CODE></A>.
 <p/>
 This implementation holds a transaction open to ensure that we see no new records added while iterating.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>oos</CODE> - stream to write to
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE> - in the event of problems reading from the store</DL>
</DD>
</DL>
<HR>

<A NAME="purgeInternal()"><!-- --></A><H3>
purgeInternal</H3>
<PRE>
protected void <B>purgeInternal</B>()
                      throws <A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></PRE>
<DL>
<DD>Iterate through <CODE>StoredMap.entrySet()</CODE> and remove, if expired.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html#purgeInternal()">purgeInternal</A></CODE> in class <CODE><A HREF="../../../../org/infinispan/loaders/AbstractCacheStore.html" title="class in org.infinispan.loaders">AbstractCacheStore</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/infinispan/loaders/CacheLoaderException.html" title="class in org.infinispan.loaders">CacheLoaderException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="printLicense()"><!-- --></A><H3>
printLicense</H3>
<PRE>
public void <B>printLicense</B>()</PRE>
<DL>
<DD>prints terms of use for Berkeley DB JE
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BdbjeCacheStore.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
-->                       <!-- Google Analytics --> <!-- <script type='text/javascript'> var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www."); document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E")); </script> <script type='text/javascript'> try { var pageTracker = _gat._getTracker("UA-8601422-4"); pageTracker._trackPageview(); } catch(err) {}</script></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/infinispan/loaders/bdbje/BdbjeCacheStoreConfig.html" title="class in org.infinispan.loaders.bdbje"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/infinispan/loaders/bdbje/BdbjeCacheStore.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BdbjeCacheStore.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_org.infinispan.loaders.AbstractCacheStore">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2013 <a href="http://www.jboss.org">JBoss, a division of Red Hat</a>. All Rights Reserved.
</BODY>
</HTML>
